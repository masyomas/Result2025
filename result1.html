<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>نتيجة الصف الأول الثانوي 2025</title>
<style>
    body {
        font-family: 'Cairo', sans-serif;
        background: linear-gradient(135deg, silver, gold, #b9f2ff);
        color: #222;
        padding: 20px;
        text-align: center;
    }
    h1, h2 {
        margin: 10px 0;
    }
    input, button {
        font-size: 18px;
        margin: 10px;
        padding: 8px 12px;
        border-radius: 6px;
        border: none;
    }
    #btn {
        background-color: #d4af37;
        color: white;
        cursor: pointer;
    }
    table {
        margin: 20px auto;
        border-collapse: collapse;
        width: 90%;
        max-width: 600px;
    }
    th, td {
        border: 1px solid #888;
        padding: 8px;
        font-size: 16px;
    }
    footer {
        margin-top: 30px;
        font-size: 14px;
    }
</style>
</head>
<body>
    <h1>نتيجة الصف الأول الثانوي للعام ٢٠٢٥</h1>
    <h2>مدرسة الخدمة الثانوية العامة المشتركة</h2>
    <input type="text" id="seatNum" placeholder="ادخل رقم الجلوس" />
    <button id="btn" onclick="search()">بحث</button>
    <div id="result"></div>
    <footer>مع تحياتي أ/ محمود عادل صالح</footer>

<script>
    const jsonUrl = "https://dl.dropboxusercontent.com/scl/fi/o03lokaoj4jw0ff4ofrxg/students.json?rlkey=j9umgn3gt8mc243z5gfr1y1aw&st=s7aut6zs";
    let students = [];

    // تحميل بيانات الطلاب
    fetch(jsonUrl)
      .then(response => response.json())
      .then(data => students = data)
      .catch(err => { alert('خطأ في تحميل البيانات'); });

    function search() {
        let input = document.getElementById('seatNum').value.trim();
        // تحويل الأرقام الهندية إلى عربية
        const arabicNums = {'٠':'0','١':'1','٢':'2','٣':'3','٤':'4','٥':'5','٦':'6','٧':'7','٨':'8','٩':'9'};
        input = input.replace(/[٠-٩]/g, d => arabicNums[d]);

        const student = students.find(s => s["رقم الجلوس"] == input);
        const resDiv = document.getElementById('result');

        if (student) {
            let html = '<table>';
            html += `<tr><th>رقم الجلوس</th><td>${student["رقم الجلوس"]}</td></tr>`;

            const nameKey = Object.keys(student).find(k => k.includes("اسم"));
            if (nameKey) html += `<tr><th>اسم الطالب</th><td>${student[nameKey]}</td></tr>`;
            if (student["عدد ايام الغياب"]) html += `<tr><th>عدد أيام الغياب</th><td>${student["عدد ايام الغياب"]}</td></tr>`;
            if (student["المجموع الكلي"]) html += `<tr><th>المجموع الكلي</th><td>${student["المجموع الكلي"]}</td></tr>`;
            if (student["نتيجة الطالب"]) html += `<tr><th>النتيجة</th><td>${student["نتيجة الطالب"]}</td></tr>`;

            // عرض باقي المواد
            for (const k in student) {
                if (!["رقم الجلوس", nameKey, "عدد ايام الغياب", "المجموع الكلي", "نتيجة الطالب"].includes(k)) {
                    html += `<tr><th>${k}</th><td>${student[k]}</td></tr>`;
                }
            }

            html += '</table>';
            resDiv.innerHTML = html;
        } else {
            resDiv.innerHTML = '<p style="color:red;">لا يوجد طالب بهذا الرقم.</p>';
        }
    }
</script>
</body>
</html>